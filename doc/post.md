# POST 文章迷思

#＃　概述

1. 技术方案:
使用markdown渲染.

文章本身的相关权限都在POST表里边存储. 
+ `available_to_other` 他人是否可以查看
+ `comment_permission`: 1 2 3 4 分别代表不同的含义.
+ `anonymous_to_other` 返回给前端的数据必须也是匿名的.否则没意义.

2. 权限设置:
   + 查看权限: 未登录用户亦可查看文章; 用户可以对发表的文章设置可否让被人看到.
   + 删除权限: 用户可以逻辑删除文章. 之后不可找到.
   + 发表权限: 登录用户方可发表文章. 但是可以被管理员封禁.
   + 修改权限: 作者可以
   + 评论权限: 登陆后方可评论. 作者可以设置相关权限
     + 粉丝可以评论
     + 他关注的人可以评论
     + 任何登录的人都可以评论
     + 关闭评论. 任何人都不可评论.
   + 匿名发表权限? 对别的用户不显示用户名. 可以搞

3. 新增一篇文章的步骤
   + 设置权限. 即新建一个post记录. 
   + 编辑并更新内容. 后期可以考虑自动保存.

4. 编辑文章的权限或者内容
   + 编辑权限: 上述三种权限, 也可以删除 一共4个字段.
   + 编辑内容: content, 这一个字段.

5. 文章的标签(方便搜索归类)

   + 新建一个表, 存储post_id与label的对应关系.
   + label 应该也有一个表, 存储创建的label
   + label 分为平台內建和用户新建的; 区分标签的种类.

6. 文章修改历史
   + content修改历史. 记录起来
   + 权限只记录当前的
   
7. 匿名文章及私有文章对外显示问题:
   + 取得文章的时候, 需要检查权限; 是否是本人
   + 自己看匿名文章的时候, 如果是本人, 显示是本人
   + 但是自己的私有文章, 不会显示在自己的时间timeline上面.
   + 私有文章, 会显示在私有文件夹里边.
   + 我曹, 后续可以考虑对文件夹设置权限, 而不是post本身
   + 现在暂时这么做吧

## API整理

1. GET /post/ 全部文章.时间倒叙排列
   + 请求参数: start, size

2. /post/<id number> 某一篇文章
   + GET 获取这篇文章的详情
   + POST 新建一篇文章
   + PUT 更新这篇文章. 通过参数区分, 是更新权限, 还是更新内容.
   + DELETE 逻辑删除这一篇文章.
